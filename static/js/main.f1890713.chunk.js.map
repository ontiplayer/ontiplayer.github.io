{"version":3,"sources":["utils.js","NetworkService.js","BaseGame.js","TicTacToe.js","VierGewinnt.js","Tanks.js","Memory.js","Tournament.js","App.js","reportWebVitals.js","index.js"],"names":["getPersistentValue","key","defVal","val","window","localStorage","getItem","undefined","setItem","setPersistentValue","value","isObject","item","Array","isArray","mergeDeep","target","sources","length","source","shift","Object","assign","shuffle","a","j","x","i","Math","floor","random","getNS","ns","name","color","id","replace","c","crypto","getRandomValues","Uint8Array","toString","this","player","groupId","callbacks","msgQueue","state","cb","push","sendPlayerUpdate","sessionId","game","ws","WebSocket","self","onopen","sendMessage","gameConfig","console","log","onerror","error","onmessage","e","data","JSON","parse","forEach","playerUpdate","players","msg","sendTimeout","clearTimeout","sendTimout","setTimeout","rmsg","fmsg","stringify","readyState","send","BaseGame","minPlayers","maxPlayers","TicTacToeBaseClass","props","createElement","TicTacToe","startPlayer","round","playerA","keys","playerB","running","field","checkField","bind","numb","index","gameover","filter","f","fields","winningFields","status","gameOverPanel","winner","line","setState","find","fieldElements","map","onClick","className","includes","style","fontSize","textAlign","mapIntToSymbol","start","redirect","to","Component","VierGewinntBaseClass","VierGewinnt","boardRef","createRef","onresize","updateBoardSizing","freeY","flat","gameoverPanel","row","y","rowElements","winningField","coord","ref","current","clientWidth","document","documentElement","setProperty","TanksBaseClass","Tanks","playerIds","pid","vx","vy","dir","seed","canvasRef","tankImgRef","moveNippleRef","shootNippleRef","recordingCountdownRef","terrain","renderTerrain","actor","recording","recordingFrames","lastShootButtonPressed","shootButtonPressed","shootCounter","getContext","simulateTank","p","t","d","getShootForce","last","r","reduce","pv","cv","ySlope","pixIndex","width","terrainData","min","abs","pixIndexMove","moveStick","options","zone","mode","position","top","left","nipplejs","on","evt","force","sign","vector","shootStick","angle","degree","canvas","height","ctx","drawImage","innerHTML","recordedFrames","ceil","drawTank","active","tcanvas","OffscreenCanvas","tctx","globalAlpha","fac","beginPath","moveTo","lineTo","cos","PI","sin","closePath","fillStyle","lineWidth","fill","strokeStyle","stroke","fillRect","globalCompositeOperation","noise","Noise","simplex2","imgd","getImageData","updateLoop","clearInterval","setInterval","renderGame","simulateGame","limitToBounds","limitToWrapper","display","src","marginLeft","margin","bottom","right","MemoryBaseClass","Memory","allFields","slice","size","solution","solved","turn","playerOrder","currentPlayer","indexOf","slvdPlayerId","tmpPlayerId","isMyTurn","pair","statusBar","gameOver","backgroundColor","groupedResults","acc","playerBar","borderColor","TournamentBaseClass","Tournament","App","addCallback","path","render","GameLobby","games","initialize","match","params","username","gameSelectionModal","usernameChanged","colorChanged","startGame","event","nameChangedTimeout","setPlayerName","colorChangedTimeout","setPlayerColor","bg","getComponent","pk","borderRadius","type","onChange","placeholder","aria-hidden","gameSelectItems","g","selectGame","cursor","disabled","aria-label","LandingPage","joinId","hostGame","joinGame","joinGameIdChanged","result","characters","charactersLength","charAt","makeid","AuthorPage","emojiInput","onEmojiClick","emojiObject","startPos","selectionStart","endPos","selectionEnd","substring","emoji","focus","padding","paddingLeft","paddingRight","disableSearchBar","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f1890713.chunk.js","sourcesContent":["export function makeid(length) {\r\n    var result           = '';\r\n    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n    var charactersLength = characters.length;\r\n    for ( var i = 0; i < length; i++ ) {\r\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function uuidv4() {\r\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\r\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\r\n    );\r\n}\r\n\r\nexport function getPersistentValue(key, defVal){\r\n    const val =  window.localStorage.getItem(key);\r\n    if(val === undefined || val === null){\r\n        window.localStorage.setItem(key, defVal);\r\n        return defVal;\r\n    }\r\n    return val;\r\n}\r\n\r\nexport function setPersistentValue(key, value){\r\n    window.localStorage.setItem(key, value);\r\n}\r\n\r\n/**\r\n * Simple object check.\r\n * @param item\r\n * @returns {boolean}\r\n */\r\nfunction isObject(item) {\r\n    return (item && typeof item === 'object' && !Array.isArray(item));\r\n}\r\n\r\n/**\r\n * Deep merge two objects.\r\n * @param target\r\n * @param ...sources\r\n */\r\nexport function mergeDeep(target, ...sources) {\r\n    if (!sources.length) return target;\r\n    const source = sources.shift();\r\n\r\n    if (isObject(target) && isObject(source)) {\r\n        for (const key in source) {\r\n            if (isObject(source[key])) {\r\n                if (!target[key]) Object.assign(target, { [key]: {} });\r\n                mergeDeep(target[key], source[key]);\r\n            } else {\r\n                Object.assign(target, { [key]: source[key] });\r\n            }\r\n        }\r\n    }\r\n\r\n    return mergeDeep(target, ...sources);\r\n}\r\n\r\n/**\r\n * Shuffles array in place.\r\n * @param {Array} a items An array containing the items.\r\n */\r\nexport function shuffle(a) {\r\n    var j, x, i;\r\n    for (i = a.length - 1; i > 0; i--) {\r\n        j = Math.floor(Math.random() * (i + 1));\r\n        x = a[i];\r\n        a[i] = a[j];\r\n        a[j] = x;\r\n    }\r\n    return a;\r\n}","import {getPersistentValue, mergeDeep, setPersistentValue, uuidv4} from \"./utils\";\r\n\r\n\r\n\r\nexport function getNS(){\r\n    return ns;\r\n}\r\n\r\nclass NetworkService {\r\n    constructor() {\r\n\r\n        const name = getPersistentValue(\"name\", \"Name\");\r\n        const color = getPersistentValue(\"color\",\"#00ff00\");\r\n        const id = getPersistentValue(\"id\", uuidv4());\r\n\r\n        this.player = {name: name, color: color, id: id};\r\n\r\n        this.groupId = -1;\r\n        this.callbacks = [];\r\n        this.msgQueue = [];\r\n        this.state = {};\r\n    }\r\n\r\n    addCallback(cb){\r\n        this.callbacks.push(cb);\r\n        cb(this.state);\r\n    }\r\n\r\n    setPlayerName(name){\r\n        if(!name || name === this.player.name){\r\n            return;\r\n        }\r\n        this.player.name = name;\r\n        setPersistentValue(\"name\", name);\r\n        this.sendPlayerUpdate();\r\n    }\r\n\r\n    setPlayerColor(color){\r\n        if(!color || color === this.player.color){\r\n            return;\r\n        }\r\n        this.player.color = color;\r\n        setPersistentValue(\"color\", color);\r\n        this.sendPlayerUpdate();\r\n    }\r\n\r\n    initialize(sessionId, game){\r\n        this.sessionId = sessionId;\r\n        this.ws = new WebSocket(\"wss://6h5xdbf9vc.execute-api.eu-central-1.amazonaws.com/production\");\r\n        const self = this;\r\n\r\n        // When the connection is open, send some data to the server\r\n        this.ws.onopen = function () {\r\n            self.sendPlayerUpdate();\r\n            self.sendMessage({gameConfig: {name: game.name}});\r\n            console.log(\"send test message\");\r\n        };\r\n\r\n        // Log errors\r\n        this.ws.onerror = function (error) {\r\n            console.log('WebSocket Error ' + error);\r\n        };\r\n\r\n        // Log messages from the server\r\n        this.ws.onmessage = function (e) {\r\n            console.log('Server: ' + e.data);\r\n            const state = JSON.parse(e.data);\r\n            self.state = mergeDeep(self.state, state);\r\n            self.callbacks.forEach(cb => cb(self.state));\r\n        };\r\n    }\r\n\r\n    sendPlayerUpdate(){\r\n        const playerUpdate = {players:{}};\r\n        playerUpdate.players[this.player.id] = this.player;\r\n        this.sendMessage(playerUpdate);\r\n    }\r\n\r\n    sendMessage(msg){\r\n        this.msgQueue.push(msg);\r\n\r\n        if(this.sendTimeout){\r\n            clearTimeout(this.sendTimout);\r\n        }\r\n\r\n        const self = this;\r\n\r\n        this.sendTimeout = setTimeout(()=>{\r\n            const rmsg = {sessionId: this.sessionId};\r\n            if(self.sendTimeout){\r\n                clearTimeout(self.sendTimout);\r\n            }\r\n            if(self.msgQueue.length <1){\r\n                return;\r\n            }\r\n            for(let m of self.msgQueue){\r\n                mergeDeep(rmsg, m);\r\n            }\r\n            self.msgQueue = [];\r\n            const fmsg = JSON.stringify(rmsg);\r\n\r\n            if(!this.ws || this.ws.readyState !== 1){\r\n                this.msgQueue.push(msg);\r\n            }else{\r\n                console.log(\"send message\", fmsg);\r\n                this.ws.send(fmsg);\r\n            }\r\n        },10);\r\n    }\r\n}\r\n\r\nconst ns = new NetworkService();\r\nexport default ns;","export class BaseGame{\r\n    constructor() {\r\n        this.name = \"Base Game\";\r\n        this.minPlayers = 1;\r\n        this.maxPlayers = 100;\r\n    }\r\n}","import './TicTacToe.css';\r\nimport {Component, createElement} from \"react\";\r\nimport {BaseGame} from \"./BaseGame\";\r\nimport {getNS} from \"./NetworkService\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nexport class TicTacToeBaseClass extends BaseGame{\r\n\r\n    constructor() {\r\n        super();\r\n        this.name = \"TicTacToe\";\r\n        this.minPlayers = 2;\r\n        this.maxPlayers = 2;\r\n    }\r\n\r\n    getComponent(props){\r\n        return createElement(TicTacToe, props);\r\n    }\r\n\r\n    start(state){\r\n        const startPlayer = Math.round(Math.random());\r\n        const playerA = Object.keys(state.players)[startPlayer];\r\n        const playerB = Object.keys(state.players)[((startPlayer+1)%2)];\r\n        debugger;\r\n        getNS().sendMessage({gameConfig: {running: true}, game: {field: [0,0,0,0,0,0,0,0,0], playerA: playerA, playerB:playerB}});\r\n    }\r\n}\r\n\r\nexport class TicTacToe extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n\r\n        this.checkField = this.checkField.bind(this);\r\n    }\r\n\r\n    mapIntToSymbol(numb){\r\n        switch (numb){\r\n            case 0: return \"-\";\r\n            case 1: return \"X\";\r\n            case 2: return \"O\";\r\n        }\r\n    }\r\n\r\n    checkField(index){\r\n        const field = JSON.parse(JSON.stringify(this.props.state.game.field));\r\n        debugger;\r\n        if(field[index] !== 0 || this.state.gameover){\r\n            return;\r\n        }\r\n        if(this.props.state.game.playerA === getNS().player.id){\r\n            if(this.props.state.game.field.filter(f=>f===1).length<=this.props.state.game.field.filter(f=>f===2).length) {\r\n                field[index] = 1;\r\n                getNS().sendMessage({game: {field: field}});\r\n            }\r\n        }\r\n        if(this.props.state.game.playerB === getNS().player.id){\r\n            if(this.props.state.game.field.filter(f=>f===1).length>this.props.state.game.field.filter(f=>f===2).length) {\r\n                field[index] = 2;\r\n                getNS().sendMessage({game: {field: field}});\r\n            }\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const fields = this.props.state.game.field;\r\n        let winningFields = [];\r\n        let status = \"\";\r\n        let gameOverPanel = \"\";\r\n\r\n        let gameover =false;\r\n\r\n        let winner = 0;\r\n        let winningLines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];\r\n        for(const line of winningLines){\r\n            const win = fields[line[0]] !==0 && fields[line[0]] === fields[line[1]] && fields[line[1]] === fields[line[2]];\r\n\r\n            if(win){\r\n                gameover = true;\r\n                winner = fields[line[0]];\r\n                if(!this.state.gameover) {\r\n                    this.setState({gameover: true});\r\n                }\r\n                winningFields = [...winningFields,...line];\r\n            }\r\n            if(winner === 1){\r\n                const player = this.props.state.players[this.props.state.game.playerA];\r\n                status = player.name + \" has won the game!\";\r\n            }\r\n            if(winner === 2){\r\n                const player = this.props.state.players[this.props.state.game.playerB];\r\n                status = player.name + \" has won the game!\";\r\n            }\r\n        }\r\n\r\n        if(winningFields.length === 0){\r\n            if(this.props.state.game.field.filter(f=>f===1).length<=this.props.state.game.field.filter(f=>f===2).length) {\r\n                const player = this.props.state.players[this.props.state.game.playerA];\r\n                status = player.name+\"'s turn\";\r\n            }else{\r\n                const player = this.props.state.players[this.props.state.game.playerB];\r\n                status = player.name+\"'s turn\";\r\n            }\r\n            if (fields.find(x => x === 0) === undefined) {\r\n                gameover = true;\r\n                if (!this.state.gameover) {\r\n                    this.setState({gameover: true});\r\n                }\r\n                status = \"Game finished with a tie!\";\r\n            }\r\n        }\r\n\r\n\r\n\r\n        let fieldElements = this.props.state.game.field.map((f, index) =>\r\n            <div onClick={()=>this.checkField(index)} className={\"card \"+(winningFields.includes(index)?\" winningField \":\"\")} style={{fontSize: \"10vmin\", textAlign: \"center\"}}>\r\n                <div className=\"card-content\">{this.mapIntToSymbol(f)}</div>\r\n            </div>);\r\n\r\n        if(this.state.gameover){\r\n            if(!gameover){\r\n                setTimeout(()=>{this.setState({gameover: false})},1);\r\n            }\r\n            gameOverPanel = <div className=\"panel-block\">\r\n                <button className=\"button is-fullwidth \" onClick={()=>getNS().sendMessage({gameConfig:{running: false}, game: undefined})}>Back to lobby</button>\r\n                <button className=\"button is-fullwidth is-primary\" onClick={()=>setTimeout(()=>{new TicTacToeBaseClass().start(this.props.state);},1)}>Restart game</button>\r\n            </div>;\r\n        }\r\n\r\n        return <div className=\"container is-half-desktop\">\r\n            {this.state.redirect ? <Redirect to={this.state.redirect}/> : \"\"}\r\n            <div className=\"column is-6 is-offset-3\">\r\n                <nav className=\"panel\">\r\n                    <p className=\"panel-heading\">\r\n                        TicTacToe\r\n                    </p>\r\n                    <p className=\"panel-block\">\r\n                        {status}\r\n                    </p>\r\n                    <p className=\"panel-block board\">\r\n                        {fieldElements}\r\n                    </p>\r\n                    {gameOverPanel}\r\n                </nav>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n}","import './VierGewinnt.css';\r\nimport {Component, createElement, createRef} from \"react\";\r\nimport {BaseGame} from \"./BaseGame\";\r\nimport {getNS} from \"./NetworkService\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nexport class VierGewinntBaseClass extends BaseGame{\r\n\r\n    constructor() {\r\n        super();\r\n        this.name = \"Vier gewinnt!\";\r\n        this.minPlayers = 2;\r\n        this.maxPlayers = 2;\r\n    }\r\n\r\n    getComponent(props){\r\n        return createElement(VierGewinnt, props);\r\n    }\r\n\r\n    start(state){\r\n        const startPlayer = Math.round(Math.random());\r\n        const playerA = Object.keys(state.players)[startPlayer];\r\n        const playerB = Object.keys(state.players)[((startPlayer+1)%2)];\r\n        getNS().sendMessage({gameConfig: {running: true}, game: {field: [[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]], playerA: playerA, playerB:playerB}});\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class VierGewinnt extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n        this.boardRef = createRef();\r\n\r\n        this.checkField = this.checkField.bind(this);\r\n\r\n        window.onresize = ()=>{this.updateBoardSizing();};\r\n    }\r\n\r\n    checkField(x){\r\n        const field = JSON.parse(JSON.stringify(this.props.state.game.field));\r\n        let freeY = -1;\r\n        for(let i=5; i>=0; i--){\r\n            if(field[i][x] === 0){\r\n                freeY = i;\r\n                break;\r\n            }\r\n        }\r\n        if(freeY < 0 || this.gameover){\r\n            return;\r\n        }\r\n        if(this.props.state.game.playerA === getNS().player.id){\r\n            if(field.flat().filter(f=>f===1).length<=field.flat().filter(f=>f===2).length) {\r\n                field[freeY][x] = 1;\r\n                getNS().sendMessage({game: {field: field}});\r\n            }\r\n        }\r\n        if(this.props.state.game.playerB === getNS().player.id){\r\n            if(field.flat().filter(f=>f===1).length>field.flat().filter(f=>f===2).length) {\r\n                field[freeY][x] = 2;\r\n                getNS().sendMessage({game: {field: field}});\r\n            }\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const fields = this.props.state.game.field;\r\n        let winningFields = [];\r\n        let status = \"\";\r\n        let gameoverPanel = \"\";\r\n\r\n        this.gameover = false;\r\n\r\n        let winner = 0;\r\n        // check for horizontal wins\r\n        fields.forEach((row ,y)=>{\r\n            const inARow = 0;\r\n            for(let x = 0; x<=3; x++){\r\n                if(row[x] === row[x+1] && row[x+1] === row[x+2] && row[x+2] === row[x+3] && row[x] !== 0){\r\n                    winningFields.push([x,y]);\r\n                    winningFields.push([x+1,y]);\r\n                    winningFields.push([x+2,y]);\r\n                    winningFields.push([x+3,y]);\r\n                    winner = row[x];\r\n                }\r\n            }\r\n        });\r\n        // check for vertical lines\r\n        for(let x=0; x<=6; x++){\r\n            for(let y=0; y<=2; y++){\r\n                if(fields[y][x] === fields[y+1][x] && fields[y+1][x] === fields[y+2][x] && fields[y+2][x] === fields[y+3][x] && fields[y][x] !== 0){\r\n                    winningFields.push([x,y]);\r\n                    winningFields.push([x,y+1]);\r\n                    winningFields.push([x,y+2]);\r\n                    winningFields.push([x,y+3]);\r\n                    winner = fields[y][x];\r\n                }\r\n            }\r\n        }\r\n        // check for upleft bot right lines\r\n        for(let x=0; x<=3; x++){\r\n            for(let y=0; y<=2; y++){\r\n                if(fields[y][x] === fields[y+1][x+1] && fields[y+1][x+1] === fields[y+2][x+2] && fields[y+2][x+2] === fields[y+3][x+3] && fields[y][x] !== 0){\r\n                    winningFields.push([x,y]);\r\n                    winningFields.push([x+1,y+1]);\r\n                    winningFields.push([x+2,y+2]);\r\n                    winningFields.push([x+3,y+3]);\r\n                    winner = fields[y][x];\r\n                }\r\n            }\r\n        }\r\n        // check for upright bot left lines\r\n        for(let x=0; x<=3; x++){\r\n            for(let y=0; y<=2; y++){\r\n                if(fields[y][x+3] === fields[y+1][x+2] && fields[y+1][x+2] === fields[y+2][x+1] && fields[y+2][x+1] === fields[y+3][x] && fields[y][x+3] !== 0){\r\n                    winningFields.push([x,y+3]);\r\n                    winningFields.push([x+1,y+2]);\r\n                    winningFields.push([x+2,y+1]);\r\n                    winningFields.push([x+3,y]);\r\n                    winner = fields[y][x+3];\r\n                }\r\n            }\r\n        }\r\n\r\n        if(winner === 1){\r\n            this.gameover = true;\r\n            const player = this.props.state.players[this.props.state.game.playerA];\r\n            status = player.name + \" has won the game!\";\r\n        }\r\n        if(winner === 2){\r\n            const player = this.props.state.players[this.props.state.game.playerB];\r\n            status = player.name + \" has won the game!\";\r\n            this.gameover = true;\r\n        }\r\n\r\n        if(winningFields.length === 0){\r\n            if(fields.flat().filter(f=>f===1).length<=fields.flat().filter(f=>f===2).length) {\r\n                const player = this.props.state.players[this.props.state.game.playerA];\r\n                status = player.name+\"'s turn\";\r\n            }else{\r\n                const player = this.props.state.players[this.props.state.game.playerB];\r\n                status = player.name+\"'s turn\";\r\n            }\r\n            if (fields.flat().find(x => x === 0) === undefined) {\r\n                this.gameover = true;\r\n                status = \"Game finished with a tie!\";\r\n            }\r\n        }\r\n\r\n        /*if(this.gameover && !this.state.this.gameover){\r\n            setTimeout(()=>{this.setState({this.gameover: true})},1);\r\n        }else{\r\n            setTimeout(()=>{this.setState({this.gameover: false})},1);\r\n        }*/\r\n\r\n        let fieldElements = [];\r\n        setTimeout(()=>{this.updateBoardSizing()},1);\r\n\r\n        fields.forEach((row, y) => {\r\n            const rowElements = [];\r\n            row.forEach((val, x) => {\r\n                const winningField = winningFields.find(coord => coord[0]===x&&coord[1]===y);\r\n                rowElements.push(<div onClick={()=>{this.checkField(x);}} className={\"vierGewinntCell\"}><div className={\"vierGewinntCellOverlay \"+(winningField?\" vierGewinntWinningCell \":\"\")}></div><div className={\"vierGewinntCell\"+val}></div></div>);\r\n            });\r\n            fieldElements = [...fieldElements, ...rowElements];\r\n        });\r\n\r\n        if(this.gameover){\r\n            gameoverPanel = <div className=\"panel-block\">\r\n                <button className=\"button is-fullwidth \" onClick={()=>getNS().sendMessage({gameConfig:{running: false}, game: undefined})}>Back to lobby</button>\r\n                <button className=\"button is-fullwidth is-primary\" onClick={()=>setTimeout(()=>{new VierGewinntBaseClass().start(this.props.state);},1)}>Restart game</button>\r\n            </div>;\r\n        }\r\n\r\n        return <div className=\"container is-half-desktop\">\r\n            {this.state.redirect ? <Redirect to={this.state.redirect}/> : \"\"}\r\n            <div className=\"column is-6 is-offset-3\">\r\n                <nav className=\"panel\">\r\n                    <p className=\"panel-heading\">\r\n                        Vier Gewinnt\r\n                    </p>\r\n                    <p ref={this.boardRef} className=\"panel-block\">\r\n                        {status}\r\n                    </p>\r\n                    <p ref={this.boardRef} className=\"panel-block vierGewinntBoard\">\r\n                        {fieldElements}\r\n                    </p>\r\n                    {gameoverPanel}\r\n                </nav>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    updateBoardSizing() {\r\n        if(this.boardRef?.current?.clientWidth){\r\n            document.documentElement.style.setProperty('--cellWidth', this.boardRef.current.clientWidth/7 + \"px\");\r\n        }\r\n    }\r\n}","import './Tanks.css';\r\nimport {Component, createElement, createRef} from \"react\";\r\nimport {BaseGame} from \"./BaseGame\";\r\nimport {getNS} from \"./NetworkService\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {shuffle} from \"./utils\";\r\nimport {Noise} from \"noisejs\";\r\nimport {TransformComponent, TransformWrapper} from \"react-zoom-pan-pinch\";\r\nimport * as nipplejs from \"nipplejs\";\r\n\r\nimport \"react-nipple/lib/styles.css\";\r\n\r\nexport class TanksBaseClass extends BaseGame {\r\n\r\n    constructor() {\r\n        super();\r\n        this.name = \"Tanks\";\r\n        this.minPlayers = 2;\r\n        this.maxPlayers = 10;\r\n    }\r\n\r\n    getComponent(props) {\r\n        return createElement(Tanks, props);\r\n    }\r\n\r\n    start(state) {\r\n        const playerIds = shuffle(Object.keys(state.players));\r\n        const players = {};\r\n        playerIds.forEach((pid, index) => {\r\n            players[pid] = {x: 800 / (playerIds.length + 1) * (index+1), y: 50, vx:0, vy:0, dir: 0};\r\n        });\r\n        getNS().sendMessage({gameConfig: {running: true}, game: {field: {seed: Math.random()}, players: players}});\r\n    }\r\n}\r\n\r\n\r\nexport class Tanks extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n        this.canvasRef = createRef();\r\n        this.tankImgRef = createRef();\r\n        this.moveNippleRef = createRef();\r\n        this.shootNippleRef = createRef();\r\n        this.recordingCountdownRef = createRef();\r\n        this.terrain = this.renderTerrain(props.state.game.field.seed);\r\n\r\n        this.actor = undefined;\r\n        this.game = this.props.state.game;\r\n        this.recording = [];\r\n        this.recordingFrames = 5*30;\r\n        this.status = \"idle\";\r\n        this.lastShootButtonPressed = false;\r\n\r\n        this.actor = JSON.parse(JSON.stringify(this.game.players[getNS().player.id]));\r\n\r\n        //this.checkField = this.checkField.bind(this);\r\n\r\n        //window.onresize = ()=>{this.updateBoardSizing();};\r\n    }\r\n\r\n    simulateGame(){\r\n        if(this.shootButtonPressed) {\r\n            this.shootCounter++;\r\n        }\r\n\r\n        if (this.canvasRef?.current) {\r\n            const canvas = this.canvasRef.current;\r\n            const ctx = canvas.getContext(\"2d\");\r\n\r\n            if(this.actor){\r\n                this.simulateTank(this.actor);\r\n            }\r\n\r\n            for (const pid in this.game.players) {\r\n                const p = this.game.players[pid];\r\n\r\n                this.simulateTank(p);\r\n\r\n                if(pid === getNS().player.id){\r\n                    if(this.status === \"recording\"){\r\n                        if(this.lastShootButtonPressed!==this.shootButtonPressed && this.lastShootButtonPressed){\r\n                            this.recording.push({t:\"s\",d:p.dir, f: this.getShootForce()});\r\n                        }else{\r\n                            const last = this.recording[this.recording.length-1];\r\n                            if(last?.vx === p.vx){\r\n                                if(last?.r !== undefined){\r\n                                    last.r ++;\r\n                                }else{\r\n                                    last.r = 2;\r\n                                }\r\n                            }else{\r\n                                this.recording.push({vx: p.vx});\r\n                            }\r\n                        }\r\n                        if(this.recording.map(e => e.r?e.r:1).reduce((pv, cv) => pv + cv, 0)>150){\r\n                            this.status = \"synchronizing\";\r\n                            this.actor = undefined;\r\n                            console.log(\"recorded instructions\");\r\n                            console.log(this.recording);\r\n                            const players = {};\r\n                            players[getNS().player.id]={recording: this.recording};\r\n                            getNS().sendMessage({game:{players:players}});\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        this.lastShootButtonPressed = this.shootButtonPressed;\r\n    }\r\n\r\n    simulateTank(p){\r\n        const pixIndex = Math.round(Math.round(p.x)-this.tankImgRef.current.width/2+Math.round(p.y)*this.terrain.width)*4+3;\r\n\r\n        if(this.terrainData[pixIndex] < 100 && this.terrainData[pixIndex+4*this.tankImgRef.current.width] < 100){\r\n            p.vy = Math.min(3, p.vy+0.1);\r\n            let ySlope;\r\n            for(ySlope = Math.round(p.vy); ySlope>=0; ySlope--){\r\n                if(this.terrainData[pixIndex+ySlope*4*this.terrain.width] < 100 && this.terrainData[pixIndex+ySlope*4*this.terrain.width+4*this.tankImgRef.current.width] < 100){\r\n                    p.y += ySlope;\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        if(Math.abs(p.vx)>0){\r\n            const pixIndexMove = Math.round(Math.round(p.x)+Math.round(p.vx)-Math.round(this.tankImgRef.current.width/2)+Math.round(p.y)*this.terrain.width)*4+3;\r\n            let ySlope;\r\n            for(ySlope = 0; ySlope<5; ySlope++){\r\n                if(Math.abs(p.vx)>0 && this.terrainData[pixIndexMove-ySlope*4*this.terrain.width] < 100 && this.terrainData[pixIndexMove-ySlope*4*this.terrain.width+4*this.tankImgRef.current.width] < 100){\r\n                    p.x += p.vx;\r\n                    p.y -= ySlope;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    renderGame() {\r\n        const self = this;\r\n\r\n        if(this.moveNippleRef?.current && !this.moveStick) {\r\n            let options = {\r\n                zone: this.moveNippleRef.current,\r\n                mode: \"static\",\r\n                color: \"red\",\r\n                position: {top: \"50%\", left: \"50%\"}\r\n            };\r\n            this.moveStick = nipplejs.create(options);\r\n            this.moveStick.on('move', function (evt, data) {\r\n                if(self.status === \"idle\"){\r\n                    self.status = \"recording\";\r\n                }\r\n\r\n                if(self.status === \"recording\") {\r\n                    if (data.force > 0.75) {\r\n                        self.actor.vx = Math.sign(data.vector.x) * 2;\r\n                    } else {\r\n                        self.actor.vx = 0;\r\n                    }\r\n                }\r\n            });\r\n            this.moveStick.on('end', function (evt, data) {\r\n                if(self.status === \"recording\") {\r\n                    self.actor.vx = 0;\r\n                }\r\n            });\r\n            options = {\r\n                zone: this.shootNippleRef.current,\r\n                mode: \"static\",\r\n                color: \"red\",\r\n                position: {top: \"50%\", left: \"50%\"}\r\n            };\r\n            this.shootStick = nipplejs.create(options);\r\n            this.shootStick.on('move', function (evt, data) {\r\n                if(self.status === \"recording\") {\r\n                    self.actor.dir = data.angle.degree;\r\n                }\r\n            });\r\n            this.shootStick.on('start', function (evt, data) {\r\n                if(self.status === \"idle\"){\r\n                    self.status = \"recording\";\r\n                }\r\n                if(self.status === \"recording\") {\r\n                    self.shootButtonPressed = true;\r\n                    self.shootCounter = 0;\r\n                }\r\n            });\r\n            this.shootStick.on('end', function (evt, data) {\r\n                self.shootButtonPressed = false;\r\n            });\r\n        }\r\n\r\n        if (this.canvasRef?.current) {\r\n            const canvas = this.canvasRef.current;\r\n            canvas.width = this.terrain.width;\r\n            canvas.height = this.terrain.height;\r\n\r\n            const ctx = canvas.getContext(\"2d\");\r\n            ctx.drawImage(this.terrain, 0, 0);\r\n\r\n            if(this.status === \"idle\"){\r\n                if(this.recordingCountdownRef?.current){\r\n                    this.recordingCountdownRef.current.innerHTML = \"Start input to record next move\";\r\n                }\r\n            }else if(this.status === \"recording\"){\r\n                const recordedFrames = this.recording.map(e => e.r?e.r:1).reduce((pv, cv) => pv + cv, 0);\r\n                if(this.recordingCountdownRef?.current){\r\n                    this.recordingCountdownRef.current.innerHTML = Math.ceil((150-recordedFrames)/30);\r\n                }\r\n            }else if(this.status === \"synchronizing\") {\r\n                if(this.recordingCountdownRef?.current){\r\n                    this.recordingCountdownRef.current.innerHTML = \"Waiting for other inputs ...\";\r\n                }\r\n            }\r\n\r\n            for(const pid in this.game.players){\r\n                const p = this.game.players[pid];\r\n                this.drawTank(canvas, ctx, p, false, this.props.state.players[pid].color);\r\n            }\r\n\r\n            if(this.actor){\r\n                this.drawTank(canvas, ctx, this.actor, true, getNS().player.color);\r\n            }\r\n        }\r\n    }\r\n\r\n    drawTank(canvas, ctx, p, active, color){\r\n        const tcanvas = new OffscreenCanvas(this.tankImgRef.current.width, this.tankImgRef.current.height);\r\n        const tctx = tcanvas.getContext(\"2d\");\r\n\r\n        ctx.globalAlpha = active?1:0.2;\r\n        if(active){\r\n            if(this.shootButtonPressed){\r\n                const fac = this.getShootForce();\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(p.x,p.y-10);\r\n                ctx.lineTo(p.x+Math.cos((p.dir+10)*Math.PI/180.0)*100*fac,p.y-10-Math.sin((p.dir+10)*Math.PI/180.0)*100*fac);\r\n                ctx.lineTo(p.x+Math.cos((p.dir-10)*Math.PI/180.0)*100*fac,p.y-10-Math.sin((p.dir-10)*Math.PI/180.0)*100*fac);\r\n                ctx.lineTo(p.x,p.y-10);\r\n                ctx.closePath();\r\n                ctx.fillStyle = \"gray\";\r\n                ctx.lineWidth = 1;\r\n                ctx.fill();\r\n            }\r\n        }\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(p.x,p.y-10);\r\n        ctx.lineTo(p.x+Math.cos(p.dir*Math.PI/180.0)*20,p.y-10-Math.sin(p.dir*Math.PI/180.0)*20);\r\n        ctx.closePath();\r\n        ctx.strokeStyle = color;\r\n        ctx.lineWidth = 4;\r\n        ctx.stroke();\r\n\r\n        // draw color\r\n        tctx.fillStyle = color;\r\n        tctx.fillRect(0, 0, tcanvas.width, tcanvas.height);\r\n\r\n        // set composite mode\r\n        tctx.globalCompositeOperation = \"multiply\";\r\n\r\n        // draw image\r\n        tctx.drawImage(this.tankImgRef.current, 0, 0);\r\n        tctx.globalCompositeOperation = \"destination-in\";\r\n        tctx.drawImage(this.tankImgRef.current, 0, 0);\r\n\r\n        ctx.globalCompositeOperation = \"source-over\";\r\n        ctx.drawImage(tcanvas, p.x-this.tankImgRef.current.width/2, p.y-this.tankImgRef.current.height);\r\n\r\n        ctx.globalAlpha = 1;\r\n    }\r\n\r\n    renderTerrain(seed) {\r\n        const noise = new Noise(seed);\r\n\r\n        const canvas = new OffscreenCanvas(800, 400);\r\n        const ctx = canvas.getContext(\"2d\");\r\n        ctx.fillStyle = \"#ffffff00\";\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, canvas.height);\r\n        for (var x = 0; x < canvas.width; x++) {\r\n            ctx.lineTo(x, canvas.height - 200 - noise.simplex2(x / 200, 0) * 100);\r\n        }\r\n        ctx.lineTo(canvas.width, canvas.height);\r\n        ctx.closePath();\r\n        ctx.fillStyle = \"#000000ff\";\r\n        ctx.fill();\r\n\r\n        const imgd = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        this.terrainData = imgd.data;\r\n        return canvas;\r\n    }\r\n\r\n    render() {\r\n        const fields = this.props.state.game.field;\r\n        let winningFields = [];\r\n        let status = \"\";\r\n        let gameoverPanel = \"\";\r\n\r\n        this.gameover = false;\r\n\r\n        if(this.updateLoop){\r\n            clearInterval(this.updateLoop);\r\n        }\r\n\r\n        const update = () => {this.renderGame();this.simulateGame();};\r\n        this.updateLoop = setInterval(update, 30);\r\n\r\n\r\n        return <div className=\"container is-half-desktop\">\r\n            {this.state.redirect ? <Redirect to={this.state.redirect}/> : \"\"}\r\n            <div className=\"column is-12\">\r\n                <nav className=\"panel\">\r\n                    <p className=\"panel-heading\">\r\n                        Tanks\r\n                    </p>\r\n                    <div className=\"panel-block\">\r\n                        <TransformWrapper options={{limitToBounds: true, limitToWrapper: false}}>\r\n                            <TransformComponent>\r\n                                <canvas className={\"tanksCanvas\"} ref={this.canvasRef}></canvas>\r\n                            </TransformComponent>\r\n                        </TransformWrapper>\r\n                        <img ref={this.tankImgRef} style={{display: \"none\"}}\r\n                             src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAYAAACzbK7QAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw1AUhU9TpSIVh3YQcchQdbEgKtJRqlgEC6Wt0KqDyUv/oElDkuLiKLgWHPxZrDq4OOvq4CoIgj8gbm5Oii5S4n1JoUWMFx7v47x7Du/dBwjNKlPNnklA1SwjnYiLufyqGHiFDwJCGEdMYqaezCxm4Vlf99RNdRflWd59f9aAUjAZ4BOJ55huWMQbxLObls55nzjMypJCfE48YdAFiR+5Lrv8xrnksMAzw0Y2PU8cJhZLXSx3MSsbKvEMcURRNcoXci4rnLc4q9U6a9+TvzBY0FYyXKc1ggSWkEQKImTUUUEVFqK0a6SYSNN53MM/7PhT5JLJVQEjxwJqUCE5fvA/+D1bszg95SYF40Dvi21/jAKBXaDVsO3vY9tunQD+Z+BK6/hrTSD2SXqjo0WOgMFt4OK6o8l7wOUOMPSkS4bkSH5aQrEIvJ/RN+WB0C3Qv+bOrX2O0wcgS7NavgEODoGxEmWve7y7r3tu//a05/cDsIZywPvHnmUAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQflAQITNBXVo8ufAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAhlJREFUOMt9Ur2rGkEQn9vZPYNRMeDzo07zckSbkBP7EFKmy9+QNn9AqkCK5DW+VkEUTBWwz/8QSKOvOATLK4yg4sd+TRr3WN/zZWC42eH29zE7APdiPB5/WiwWf1arld5ut/ZwOJBSiqSUZ3k8Hmm/39Nms7HL5XI5nU5/dLvdj/C/6Pf735IkWaVpSuv1mg6HA0kpyRjzIJVSdDweabfb0Xq9pjRNKUmSv4PB4LuPyfxDq9V6J4QoIyIwxiAIgrPvYwkAwBgDIcSzZrP5/iIBERUKhcK1Dw4AEARBVvvh+j45IkKxWHx+kaDX633lnCMinl0+kYO19kE6IgeOiMA5p9FodOtw0amXUn4plUq1MAxBCJGpIqJH01qb1cYY1wsqlcqrOI6vJ5PJTw4AMBwOb+M4jtxo3GVjTObCKb4/Jt+NewvOOUZR9BYAAG9ubnrtdvtDPp/PCSEyq74qrTUYYy6m+88YAwCQ1YyxfL1eD3kURS+FEE+dAmstKKUyJ67nAHz1vmPnBgDALUqn0+nwcrl8xTnP2J1i/3GNMRdH5G+cP0oiAkSEarX6mgPAxoH5wL51fwR+cM4zEp/ICWOMMZ6m6e9SqfRCax06YK312dxdfYmAc56tqdu+ExHtdrs73mg0Ps/nc6zVam8YY1fWWlRKMSklaa3JJzoJIGutIiKFiJTL5VAI8SQMQxRC0ImElFLz2Wz26x/0dLsgoOCydAAAAABJRU5ErkJggg==\"/>\r\n                        <div ref={this.recordingCountdownRef} style={{position: \"fixed\", width: \"20vmin\", marginLeft: \"-10vmin\", textAlign: \"center\", left: \"50%\", top:0}}>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div className={\"card\"} style={{position: \"fixed\", margin: \"5vmin\", bottom: 0, width: \"30vmin\", height: \"30vmin\", left: 0}} ref={this.moveNippleRef}>Move</div>\r\n                    <div className={\"card\"} style={{position: \"fixed\", margin: \"5vmin\", bottom: 0, width: \"30vmin\", height: \"30vmin\", right: 0, textAlign:\"right\"}} ref={this.shootNippleRef}>Shoot</div>\r\n                    {gameoverPanel}\r\n                </nav>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    updateBoardSizing() {\r\n        if (this.boardRef?.current?.clientWidth) {\r\n            document.documentElement.style.setProperty('--cellWidth', this.boardRef.current.clientWidth / 7 + \"px\");\r\n        }\r\n    }\r\n\r\n    getShootForce() {\r\n        return Math.abs(Math.sin(this.shootCounter/30));\r\n    }\r\n}","import './Memory.css';\r\nimport {Component, createElement, createRef} from \"react\";\r\nimport {BaseGame} from \"./BaseGame\";\r\nimport {getNS} from \"./NetworkService\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {shuffle} from \"./utils\";\r\n\r\nexport class MemoryBaseClass extends BaseGame{\r\n\r\n    constructor() {\r\n        super();\r\n        this.name = \"Memory\";\r\n        this.minPlayers = 2;\r\n        this.maxPlayers = 4;\r\n    }\r\n\r\n    getComponent(props){\r\n        return createElement(Memory, props);\r\n    }\r\n\r\n    start(state){\r\n        const playerIds = shuffle(Object.keys(state.players));\r\n        const size = 5*8;\r\n        let allFields = [];\r\n        for(let i=1; i<=232; i++){\r\n            allFields.push(i);\r\n        }\r\n        allFields = shuffle(allFields);\r\n        allFields = allFields.slice(0,Math.floor(size/2));\r\n        allFields = [...allFields, ...allFields];\r\n        allFields = shuffle(allFields);\r\n        getNS().sendMessage({gameConfig: {running: true}, game: {solution: allFields, solved: allFields.map(x=>-1), turn: 0, playerOrder: playerIds}});\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class Memory extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n        this.boardRef = createRef();\r\n\r\n        this.checkField = this.checkField.bind(this);\r\n\r\n        window.onresize = ()=>{this.updateBoardSizing();};\r\n    }\r\n\r\n    isMyTurn(){\r\n        const currentPlayer = this.props.state.game.turn%this.props.state.game.playerOrder.length;\r\n        const ourPlayer = this.props.state.game.playerOrder.indexOf(getNS().player.id);\r\n        return ourPlayer === currentPlayer;\r\n    }\r\n\r\n    checkField(x){\r\n        const solved = JSON.parse(JSON.stringify(this.props.state.game.solved));\r\n        const solution = this.props.state.game.solution;\r\n        const slvdPlayerId = this.props.state.game.playerOrder.indexOf(getNS().player.id);\r\n        const tmpPlayerId = 1000+slvdPlayerId;\r\n        if(!this.isMyTurn() || solved.filter(x=> x===tmpPlayerId).length === 2){\r\n            return;\r\n        }\r\n\r\n        solved[x] = tmpPlayerId;\r\n        getNS().sendMessage({game: {solved: solved}});\r\n        if(this.isMyTurn() && solved.filter(x=> x===tmpPlayerId).length === 2){\r\n            setTimeout(()=>{\r\n                const pair = solved.map((x,i) => [x,solution[i],i]).filter(p => p[0] === tmpPlayerId);\r\n                if(pair[0][1] === pair[1][1]){\r\n                    solved[pair[0][2]] = slvdPlayerId;\r\n                    solved[pair[1][2]] = slvdPlayerId;\r\n                    getNS().sendMessage({game: {solved: solved}});\r\n                }else{\r\n                    solved[pair[0][2]] = -1;\r\n                    solved[pair[1][2]] = -1;\r\n                    getNS().sendMessage({game: {solved: solved, turn: (this.props.state.game.turn+1)}});\r\n                }\r\n            },1000);\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const solution = this.props.state.game.solution;\r\n        const solved = this.props.state.game.solved;\r\n        let winningFields = [];\r\n        let statusBar = \"\";\r\n        let gameoverPanel = \"\";\r\n\r\n        this.gameover = false;\r\n        const gameOver = solved.find(x => x === -1) === undefined;\r\n        let winner = 0;\r\n\r\n        let fieldElements = [];\r\n        for(let i=0; i<solution.length; i++){\r\n            let backgroundColor = \"white\";\r\n            if(solved[i]!==-1 && solved[i]<1000){\r\n                backgroundColor = this.props.state.players[this.props.state.game.playerOrder[solved[i]]].color;\r\n            }\r\n            fieldElements.push(<div className={\"memoryCell\"} onClick={()=>this.checkField(i)} ><div className={\"memoryCardInner\"+ (solved[i]!==-1?\" flipped\":\"\")}><div className=\"memoryCardBack\"></div><div  style={{backgroundColor: backgroundColor}} className={\"memoryCard\"}><img src={\"imgs/memory/\"+solution[i]+\".svg\"}/> </div></div></div>);\r\n        }\r\n        setTimeout(()=>{this.updateBoardSizing()},1);\r\n        const currentPlayer = this.props?.state?.game?.turn%this.props.state.game.playerOrder.length;\r\n        const curPlayerName = this.props?.state?.players[this.props?.state?.game?.playerOrder[currentPlayer]]?.name;\r\n\r\n        statusBar = curPlayerName+\"'s turn\";\r\n\r\n        let groupedResults = {};\r\n        for(let i=0; i<this.props.state.game.playerOrder.length; i++){\r\n            groupedResults[i] = 0;\r\n        }\r\n        groupedResults = solved.filter(x=>x>=0&&x<1000).reduce((acc, cv) => {if(acc[cv] === undefined){acc[cv] = 1}else{acc[cv]++;} return groupedResults;}, groupedResults);\r\n        let playerBar = [];\r\n        for(const key in groupedResults) {\r\n            const player = this.props.state.players[this.props.state.game.playerOrder[key]];\r\n            playerBar.push(<div className={\"playerStatus \"+(key === currentPlayer+\"\"?\" currentPlayer \":\"\")} style={{borderColor: player.color}}>{player.name}<br/>{groupedResults[key]/2}</div>)\r\n        }\r\n        statusBar = <div style={{display: \"flex\"}} className=\"playerStatusBar\">{playerBar}</div>\r\n\r\n        if(gameOver){\r\n            gameoverPanel = <div className=\"panel-block\">\r\n                <button className=\"button is-fullwidth \" onClick={()=>getNS().sendMessage({gameConfig:{running: false}, game: undefined})}>Back to lobby</button>\r\n                <button className=\"button is-fullwidth is-primary\" onClick={()=>setTimeout(()=>{new MemoryBaseClass().start(this.props.state);},1)}>Restart game</button>\r\n            </div>;\r\n        }\r\n\r\n        return <div className=\"container is-half-desktop\">\r\n            {this.state.redirect ? <Redirect to={this.state.redirect}/> : \"\"}\r\n            <div className=\"column is-6 is-offset-3\">\r\n                <nav className=\"panel\">\r\n                    <p className=\"panel-heading\">\r\n                        Memory\r\n                    </p>\r\n                    <p ref={this.boardRef} className=\"panel-block\">\r\n                        {statusBar}\r\n                    </p>\r\n                    <p ref={this.boardRef} className=\"panel-block memoryBoard\">\r\n                        {fieldElements}\r\n                    </p>\r\n                    {gameoverPanel}\r\n                </nav>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    updateBoardSizing() {\r\n        if(this.boardRef?.current?.clientWidth){\r\n            document.documentElement.style.setProperty('--cellWidth', this.boardRef.current.clientWidth/5 + \"px\");\r\n        }\r\n    }\r\n}","import './Memory.css';\r\nimport {Component, createElement, createRef} from \"react\";\r\nimport {BaseGame} from \"./BaseGame\";\r\nimport {getNS} from \"./NetworkService\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {shuffle} from \"./utils\";\r\n\r\nexport class TournamentBaseClass extends BaseGame{\r\n\r\n    constructor() {\r\n        super();\r\n        this.name = \"Tournament\";\r\n        this.minPlayers = 2;\r\n        this.maxPlayers = 100;\r\n    }\r\n\r\n    getComponent(props){\r\n        return createElement(Tournament, props);\r\n    }\r\n\r\n    start(state){\r\n        const playerIds = shuffle(Object.keys(state.players));\r\n        const size = 5*8;\r\n        let allFields = [];\r\n        for(let i=1; i<=232; i++){\r\n            allFields.push(i);\r\n        }\r\n        allFields = shuffle(allFields);\r\n        allFields = allFields.slice(0,Math.floor(size/2));\r\n        allFields = [...allFields, ...allFields];\r\n        allFields = shuffle(allFields);\r\n        getNS().sendMessage({gameConfig: {running: true}, game: {}});\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class Tournament extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n        this.boardRef = createRef();\r\n\r\n        this.checkField = this.checkField.bind(this);\r\n\r\n        window.onresize = ()=>{this.updateBoardSizing();};\r\n    }\r\n\r\n    render(){\r\n        const solution = this.props.state.game.solution;\r\n        const solved = this.props.state.game.solved;\r\n        let winningFields = [];\r\n        let status = \"\";\r\n        let gameoverPanel = \"\";\r\n\r\n        this.gameover = false;\r\n\r\n        let winner = 0;\r\n\r\n        let fieldElements = [];\r\n        for(let i=0; i<solution.length; i++){\r\n            let backgroundColor = \"white\";\r\n            if(solved[i]!==-1 && solved[i]<1000){\r\n                backgroundColor = this.props.state.players[this.props.state.game.playerOrder[solved[i]]].color;\r\n            }\r\n            fieldElements.push(<div className={\"memoryCell\"} onClick={()=>this.checkField(i)} ><div className={\"memoryCardInner\"+ (solved[i]!==-1?\" flipped\":\"\")}><div className=\"memoryCardBack\"></div><div  style={{backgroundColor: backgroundColor}} className={\"memoryCard\"}><img src={\"imgs/memory/\"+solution[i]+\".svg\"}/> </div></div></div>);\r\n        }\r\n        setTimeout(()=>{this.updateBoardSizing()},1);\r\n        debugger;\r\n        const currentPlayer = this.props?.state?.game?.turn%this.props.state.game.playerOrder.length;\r\n        const curPlayerName = this.props?.state?.players[this.props?.state?.game?.playerOrder[currentPlayer]]?.name;\r\n\r\n        status = curPlayerName+\"'s turn\";\r\n\r\n        if(this.gameover){\r\n            gameoverPanel = <div className=\"panel-block\">\r\n                <button className=\"button is-fullwidth \" onClick={()=>getNS().sendMessage({gameConfig:{running: false}, game: undefined})}>Back to lobby</button>\r\n                <button className=\"button is-fullwidth is-primary\" onClick={()=>setTimeout(()=>{new TournamentBaseClass().start(this.props.state);},1)}>Restart game</button>\r\n            </div>;\r\n        }\r\n\r\n        return <div className=\"container is-half-desktop\">\r\n            {this.state.redirect ? <Redirect to={this.state.redirect}/> : \"\"}\r\n            <div className=\"column is-6 is-offset-3\">\r\n                <nav className=\"panel\">\r\n                    <p className=\"panel-heading\">\r\n                        Memory\r\n                    </p>\r\n                    <p ref={this.boardRef} className=\"panel-block\">\r\n                        {status}\r\n                    </p>\r\n                    <p ref={this.boardRef} className=\"panel-block memoryBoard\">\r\n                        {fieldElements}\r\n                    </p>\r\n                    {gameoverPanel}\r\n                </nav>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    updateBoardSizing() {\r\n        if(this.boardRef?.current?.clientWidth){\r\n            document.documentElement.style.setProperty('--cellWidth', this.boardRef.current.clientWidth/5 + \"px\");\r\n        }\r\n    }\r\n}","import './App.css';\nimport {Component, createElement, createRef} from \"react\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useParams\n} from \"react-router-dom\";\nimport {Redirect} from \"react-router-dom\";\nimport {makeid, mergeDeep} from \"./utils\";\nimport {getNS} from \"./NetworkService\";\nimport Picker from 'emoji-picker-react';\nimport {TicTacToe, TicTacToeBaseClass} from \"./TicTacToe\";\nimport {VierGewinntBaseClass} from \"./VierGewinnt\";\nimport {TanksBaseClass} from \"./Tanks\";\nimport {MemoryBaseClass} from \"./Memory\";\nimport {TournamentBaseClass} from \"./Tournament\";\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n\n    }\n\n    componentDidMount() {\n        const self = this;\n        getNS().addCallback((state) => {\n            self.setState(JSON.parse(JSON.stringify(state)));\n        });\n    }\n\n    render() {\n        const redirect = this.state.redirect ? <Redirect to={this.state.redirect} push/> : \"\";\n\n        return (\n            <Router>\n                {redirect}\n                <div>\n\n\n                    {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n                    <Switch>\n                        <Route path=\"/author\" render={(props) => {\n                            return <AuthorPage  {...props}/>\n                        }}/>\n                        <Route path=\"/:id/:subid\" render={(props) => {\n                            debugger;\n                            return <GameLobby state={this.state}  {...props}/>\n                        }}/>\n                        <Route path=\"/:id\" render={(props) => {\n                            return <GameLobby state={this.state}  {...props}/>\n                        }}/>\n                        <Route path=\"/\" render={(props) => {\n                            return <LandingPage  {...props}/>\n                        }}/>\n                    </Switch>\n                </div>\n            </Router>\n        );\n    }\n}\n\nclass GameLobby extends Component {\n    constructor(props) {\n        super(props);\n\n        this.games = [new MemoryBaseClass(), new TanksBaseClass(), new VierGewinntBaseClass(), new TicTacToeBaseClass()];\n\n\n        getNS().initialize(this.props.match.params.id, this.games[0]);\n\n        this.state = {username: getNS().player.name, color: getNS().player.color, gameSelectionModal: false};\n        this.usernameChanged = this.usernameChanged.bind(this);\n        this.colorChanged = this.colorChanged.bind(this);\n        this.startGame = this.startGame.bind(this);\n\n        /*const a = {name: \"Name\"};\n        const b = {name: \"Nils\"};\n        mergeDeep(a, b);\n        alert(JSON.stringify(a));*/\n    }\n\n    usernameChanged(event) {\n        this.setState({username: event.target.value});\n        if (this.nameChangedTimeout) {\n            clearTimeout(this.nameChangedTimeout);\n            this.nameChangedTimeout = undefined;\n        }\n        this.nameChangedTimeout = setTimeout(() => {\n            getNS().setPlayerName(event.target.value);\n        }, 1000);\n    }\n\n    colorChanged(event) {\n        this.setState({color: event.target.value});\n        if (this.colorChangedTimeout) {\n            clearTimeout(this.colorChangedTimeout);\n            this.colorChangedTimeout = undefined;\n        }\n        this.colorChangedTimeout = setTimeout(() => {\n            getNS().setPlayerColor(event.target.value);\n        }, 1000);\n    }\n\n    startGame() {\n        const currentGame = this.games.find(bg => bg.name === this.props.state.gameConfig.name);\n        currentGame.start(this.props.state);\n    }\n\n    selectGame(game) {\n        getNS().sendMessage({gameConfig:{name:game.name}});\n    }\n\n    // We can use the 'useParams' hook here to access\n    // the dynamic pieces of the URL.\n    render() {\n        let id = this.props.match.params.id;\n\n        if (this.props.state.gameConfig && this.props.state.gameConfig.running) {\n            const currentGame = this.games.find(bg => bg.name === this.props.state.gameConfig.name);\n            return currentGame.getComponent(this.props);\n        }\n\n        let players;\n        if (this.props.state.players) {\n            players = Object.keys(this.props.state.players).map(pk => {\n                let p = this.props.state.players[pk];\n                if (p.id === getNS().player.id) {\n                    return <a key={\"player\" + p.id} className=\"panel-block is-active\">\n                            <span className=\"panel-icon\">\n                              <i className=\"fas fa-user\"></i>\n                            </span>\n                        <input style={{borderRadius: \"100%\", width: \"3em\"}} type=\"color\" className=\"input\"\n                               value={this.state.color}\n                               onChange={this.colorChanged}/>\n                        <input placeholder=\"username\" type=\"text\" className=\"input\" value={this.state.username}\n                               onChange={this.usernameChanged}/><br/>\n                    </a>;\n                }\n                return <a key={\"player\" + p.id} className=\"panel-block\">\n                            <span className=\"panel-icon\">\n                              <i className=\"fas fa-user\" aria-hidden=\"true\"></i>\n                            </span>\n                    <span style={{\n                        width: \"1em\",\n                        height: \"1em\",\n                        borderRadius: \"100%\",\n                        margin: \"1em\",\n                        backgroundColor: p.color\n                    }}></span>\n                    {p.name}\n                </a>;\n            });\n        }\n\n        const gameSelectItems = this.games.map(g => <tr onClick={()=>{this.selectGame(g); this.setState({gameSelectionModal: false});}} style={{cursor: \"pointer\"}}>\n            <td>{g.name}</td>\n            <td>{g.minPlayers} - {g.maxPlayers}</td>\n            <td><button className={\"button is-primary\"}>&gt;</button> </td>\n        </tr>);\n\n        return (\n            <div>\n                <div className=\"container is-half-desktop\">\n                    {this.state.redirect ? <Redirect to={this.state.redirect}/> : \"\"}\n                    <div className=\"column is-6 is-offset-3\">\n                        <nav className=\"panel\">\n                            <p className=\"panel-heading\">\n                                Game Lobby\n                            </p>\n                            <p className=\"panel-block\">\n                                {id}\n                            </p>\n                            <p className=\"panel-block\">\n                                {this.props?.state?.gameConfig?.name}\n                                <button className=\"button is-small\" style={{marginLeft: \"1em\"}}\n                                        onClick={() => this.setState({gameSelectionModal: true})}> change game\n                                </button>\n                            </p>\n                            <p className=\"panel-tabs\">\n                                <a className=\"is-active\">Players</a>\n                                <a className=\"is-disabled\">Settings</a>\n                            </p>\n\n                            {players}\n                        </nav>\n                        <button onClick={this.startGame} disabled={false}\n                                className=\"button is-large is-primary is-fullwidth\">Start Game\n                        </button>\n                    </div>\n                </div>\n                <div className={\"modal \" + (this.state.gameSelectionModal ? \"is-active\" : \"\")}>\n                    <div className=\"modal-background\" onClick={() => this.setState({gameSelectionModal: false})}></div>\n                    <div className=\"modal-card\">\n                        <header className=\"modal-card-head\">\n                            <p className=\"modal-card-title\">Modal title</p>\n                            <button className=\"delete\" aria-label=\"close\"\n                                    onClick={() => this.setState({gameSelectionModal: false})}></button>\n                        </header>\n                        <section className=\"modal-card-body\">\n                            <table className=\"table is-fullwidth  is-hoverable\">\n                                <thead>\n                                <tr>\n                                    <th>Game</th>\n                                    <th># Players</th>\n                                    <th></th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                {gameSelectItems}\n                                </tbody>\n                            </table>\n                        </section>\n\n                    </div>\n                </div>\n            </div>\n\n\n        );\n    }\n}\n\nclass LandingPage extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {joinId: \"\"};\n        this.hostGame = this.hostGame.bind(this);\n        this.joinGame = this.joinGame.bind(this);\n        this.joinGameIdChanged = this.joinGameIdChanged.bind(this);\n    }\n\n    hostGame() {\n        const sessionId = makeid(8);\n        this.setState({redirect: sessionId});\n    }\n\n    joinGame() {\n        this.setState({redirect: this.state.joinId});\n    }\n\n    joinGameIdChanged(event) {\n        this.setState({joinId: event.target.value});\n    }\n\n    // We can use the 'useParams' hook here to access\n    // the dynamic pieces of the URL.\n    render() {\n        let id = this.props.match.params.id;\n\n        return (\n            <div className=\"container is-half-desktop\">\n                {this.state.redirect ? <Redirect to={this.state.redirect}/> : \"\"}\n                <div className=\"column is-6 is-offset-3\">\n                    <button onClick={this.hostGame} className=\"button is-large is-primary is-fullwidth\">Host Game\n                    </button>\n                    <br/><br/>\n                    <input placeholder=\"enter 8 digit session code\" type=\"text\" className=\"input\"\n                           value={this.state.joinId}\n                           onChange={this.joinGameIdChanged}/><br/>\n                    <button onClick={this.joinGame} disabled={this.state.joinId.length < 8}\n                            className=\"button is-large  is-fullwidth\">Join Game\n                    </button>\n\n                </div>\n            </div>\n        );\n    }\n}\n\n\nclass AuthorPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.emojiInput = createRef();\n        this.onEmojiClick = this.onEmojiClick.bind(this);\n    }\n\n    onEmojiClick(event, emojiObject) {\n\n        var startPos = this.emojiInput.current.selectionStart;\n        var endPos = this.emojiInput.current.selectionEnd;\n        this.emojiInput.current.value = this.emojiInput.current.value.substring(0, startPos)\n            + emojiObject.emoji\n            + this.emojiInput.current.value.substring(endPos, this.emojiInput.current.value.length);\n        this.emojiInput.current.focus();\n        this.emojiInput.current.selectionStart = startPos + emojiObject.emoji.length;\n        this.emojiInput.current.selectionEnd = startPos + emojiObject.emoji.length;\n    }\n\n    // We can use the 'useParams' hook here to access\n    // the dynamic pieces of the URL.\n    render() {\n        let id = this.props.match.params.id;\n\n        return (\n            <div className=\"container is-half-desktop\">\n                {this.state.redirect ? <Redirect to={this.state.redirect}/> : \"\"}\n                <div className=\"column is-6 is-offset-3\">\n                    <article className=\"panel is-primary\">\n                        <p className=\"panel-heading\">\n                            Fernbedienung\n                        </p>\n                        <div className=\"panel-block\">\n                            <div className=\"notification is-primary is-light\"\n                                 style={{padding: \"0.5rem 1rem 0.5rem 0.75rem\"}}>\n                                Flieger\n                            </div>\n                            <br/>\n                            <br/>\n                            <br/>\n                        </div>\n                        <div className=\"panel-block\">\n                            <input style={{\"fontSize\": \"x-large\"}} className=\"input\" type=\"text\" ref={this.emojiInput}/>\n                            <button style={{\n                                \"fontSize\": \"x-large\",\n                                marginLeft: \".5em\",\n                                paddingLeft: \"calc(.75em - 1px)\",\n                                paddingRight: \"calc(.75em - 1px)\"\n                            }} className=\"button is-primary is-rounded\"><i className=\"fas fa-paper-plane\"></i></button>\n                        </div>\n                        <div className=\"panel-block\" style={{padding: 0}}>\n                            <Picker onEmojiClick={this.onEmojiClick} disableSearchBar={true} style={{width: \"100%\"}}/>\n                        </div>\n                    </article>\n\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}